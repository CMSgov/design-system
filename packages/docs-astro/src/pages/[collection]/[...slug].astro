---
import BasicPage from '../../components/layout/pages/BasicPage.astro';
import { BasicCollection, BasicEntry, basicCollectionKeys } from '../../content/config';
import { getCollection } from 'astro:content';

export function getStaticPaths() {
  async function getCollectionPaths(collection: BasicCollection) {
    const posts = (await getCollection(collection)) as BasicEntry[];
    return posts.map((post) => ({
      params: {
        collection,
        slug: post.slug,
      },
      props: post,
    }));
  }

  return Promise.all(basicCollectionKeys.map(key => getCollectionPaths(key)));
}
type Props = BasicEntry;

const post = Astro.props;
const { Content } = await post.render();
---

<BasicPage {...post.data}>
  <Content />
</BasicPage>
