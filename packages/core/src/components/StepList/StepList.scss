@import "@cmsgov/design-system-support/src/settings/index";

/*
Step List

@status beta

A step list represents a user's progression through an application or multi-page
form. It serves as a table of contents and a way to quickly see where they are
and what they should be working on next.

Markup:
<div style="max-width: 628px">
  <ol class="ds-c-step-list ds-u-margin-top--4">
    <li class="ds-c-step ds-c-step--completed">
      <h2 class="ds-c-step__header ds-h3 ds-u-display--flex ds-u-justify-content--between">
        <div class="ds-c-step__title">Choose a tax year</div>
        <div>
          <div class="ds-c-step__completed">
            <span>Completed</span>
            <a href="#step-1">
              Edit
              <span class="ds-u-visibility--screen-reader">
                "Choose a tax year"
              </span>
            </a>
          </div>
        </div>
      </h2>
    </li>
    <li class="ds-c-step ds-c-step--current">
      <h2 class="ds-c-step__header ds-h3 ds-u-display--flex ds-u-justify-content--between">
        <div class="ds-c-step__title">Enter household details</div>
        <div>
          <a href="#step-2" class="ds-c-button ds-c-button--success">
            Resume
            <span class="ds-u-visibility--screen-reader">
              "Enter household details"
            </span>
          </a>
        </div>
      </h2>
      <div>
        <div class="ds-c-step__description">
          Answer questions about who in your household qualifies for a premium tax
          credit and information on each person, including date of birth,
          location(s) they lived in for the year, and months of marketplace
          coverage.
        </div>
        <ul class="ds-c-step__substeps">
          <li class="ds-c-substep">
            <div class="ds-u-display--flex ds-u-justify-content--between">
              <div class="ds-c-substep__title">Overall household</div>
              <div>
                <a href="#step-2a">
                  Edit
                  <span class="ds-u-visibility--screen-reader">
                    "Overall household"
                  </span>
                </a>
              </div>
            </div>
          </li>
          <li class="ds-c-substep">
            <div class="ds-u-display--flex ds-u-justify-content--between">
              <div class="ds-c-substep__title">Bob's information</div>
            </div>
          </li>
          <li class="ds-c-substep">
            <div class="ds-u-display--flex ds-u-justify-content--between">
              <div class="ds-c-substep__title">Barb's information</div>
            </div>
          </li>
        </ul>
      </div>
    </li>
    <li class="ds-c-step">
      <h2 class="ds-c-step__header ds-h3 ds-u-display--flex ds-u-justify-content--between">
        <div class="ds-c-step__title">Review your information</div>
      </h2>
    </li>
    <li class="ds-c-step">
      <h2 class="ds-c-step__header ds-h3 ds-u-display--flex ds-u-justify-content--between">
        <div class="ds-c-step__title">View premium results</div>
      </h2>
    </li>
  </ol>
</div>

Style guide: components.step-list
*/

$number-size: 32px;
$number-border-size: 2px;
$number-margin: 10px;
$step-list-padding-h: $spacer-1;
$step-list-padding-left: $step-list-padding-h + $number-margin + $number-size;
$step-margin: $spacer-2;
$step-border-width: 1px;
$step-border-color: $color-gray;
$step-button-height: 38px;

.ds-c-step-list {
  margin: 0;
  padding: 0 $step-list-padding-h;
  padding-left: $step-list-padding-left;
  list-style-type: none;
}

.ds-c-step {
  position: relative;
  margin-bottom: $step-margin;
  padding-bottom: $step-margin;
  color: $color-gray;
  counter-increment: step-counter;

  &::before {
    content: counter(step-counter);
    display: block;
    box-sizing: border-box;
    width: $number-size;
    height: $number-size;
    padding-left: 1px;
    position: absolute;
    top: ($step-button-height - $number-size) / 2;
    left: -($number-margin + $number-size);
    line-height: $number-size - $number-border-size * 2;
    font-size: 20px;
    text-align: center;
    border: $number-border-size solid $color-gray;
    border-radius: 50%;
    color: $color-gray;
  }

  &::after {
    content: "";
    display: block;
    position: absolute;
    bottom: 0;
    left: -$step-list-padding-left;
    right: -$step-list-padding-h;
    height: 1px;
    border-bottom: $step-border-width solid $step-border-color;
  }
}

.ds-c-step--current,
.ds-c-step--completed {
  &::before {
    line-height: $number-size;
    border: none;
    color: $color-white;
  }
}

.ds-c-step--current {
  .ds-c-step__header {
    color: $color-primary;
  }

  &::before {
    background: $color-primary;
  }
}

.ds-c-step--completed {
  color: $color-base;

  .ds-c-step__header {
    color: $color-base;
  }

  &::before {
    background: $color-base;
  }
}

.ds-c-step__header {
  margin: 0;
}

.ds-c-step__title {
  line-height: $step-button-height;
}

.ds-c-step__completed {
  text-align: right;
  font-size: $base-font-size;

  span {
    display: inline-block;
    padding-top: 6px;
    line-height: $step-button-height - 12px;
  }

  a {
    display: block;
    font-weight: $font-normal;
  }

  &::before {
    background-size: contain;
    background-image: url('#{$image-path}/checkmark-green.svg');
    box-sizing: border-box;
    content: '';
    display: inline-block;
    height: 12px;
    margin-right: $spacer-1;
    width: 16px;
  }
}

.ds-c-step__description {
  max-width: 75%;
  font-size: $small-font-size;

  .ds-c-step--current &,
  .ds-c-step--completed & {
    margin-top: $spacer-1;
  }
}

.ds-c-step__substeps {
  margin: 0;
  padding-left: $spacer-5;
  list-style-type: none;

  .ds-c-step__description + & {
    margin-top: $spacer-1;
  }
}

.ds-c-substep {
  display: block;
  position: relative;
  font-size: $small-font-size;

  &::before {
    content: "\2022";
    position: absolute;
    top: 0;
    left: -$spacer-3;
  }
}

/*
Start, Resume, and Edit links

A user interacts with the steps through "Start", "Resume", and "Edit"
links.

Visually "Start" and "Resume" are buttons, but all three are implemented
with `<a>` tags. In the React component, the links' `href` properties are
determined by the `step` object's `route` property. One can also
optionally pass an `onEnterStep` function that will cancel the default
link behavior and call `onEnterStep` with `route` as a parameter for
apps that handle routing with JavaScript.

When a step has substeps, the React component will automatically set the
`href` property of the parent step's "Start" and "Resume" buttons to match
the current (incomplete) substep's `route`. The "Edit" button will only
appear on substeps that have been completed.

Style guide: components.step-list.buttons
*/

/*
`<StepList>`

@react-component StepList

Style guide: components.step-list.react
*/
